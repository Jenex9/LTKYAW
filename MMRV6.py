##TECHNOLOGY_BY_LTKYAW


import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9weXRob24KIyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIyAtLS0tLS0gWyBHYXVzYWggRGlvcHJlayBOdGFyIEVycm9yIF0gLS0tLS0tICMKQXV0aG9yICAgID0gJ0xUS1lBVycKRmFjZWJvb2sgID0gJ0ZhY2Vib29rLmNvbS9maWtyaXRhbXBhbjMwNScKSW5zdGFncmFtID0gJ0luc3RhZ3JhbS5jb20vZmlfc2luYWdhJwpXaGF0c2FwcCAgPSAnMDgxMjY5NDk2MjMxJwpZb3VUdWJlICAgPSAnWW91dHViZS5jb20vY2hhbm5lbC9VQ1pxblpsSjBqZm9XU25Yck5FajVKSEEnClN5YWZpaSAgPSAxMDAwODA3MTY3MTgwMzUKUG9zdGluZ2FuID0gMTE1NzUzMDU0NDU4NTg1CmtvbWVudGFyICAgPSAnXG5cbmh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nICsgc3RyKFBvc3RpbmdhbikKIyMjIyMgLT4gSU1QT1JUIE1PRFVMRQppbXBvcnQgcmVxdWVzdHMsYnM0LHN5cyxvcyxyYW5kb20sdGltZSxyZSxqc29uLHV1aWQsc3VicHJvY2Vzcwpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludApmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wKZnJvbSByZXF1ZXN0cy5leGNlcHRpb25zIGltcG9ydCBDb25uZWN0aW9uRXJyb3IKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvcgpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXIKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyc2VyCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHF1b3RlCiMjIyMjIEJVQVQgV0FSTkEgLT4gWApaID0gIlx4MWJbMDs5MG0iICAgICAjIEhpdGFtIApNID0gIlx4MWJbMzg7NTsxOTZtIiAjIE1lcmFoCkggPSAiXHgxYlszODs1OzQ2bSIgICMgSGlqYXUKSyA9ICJceDFiWzM4OzU7MjI2bSIgIyBLdW5pbmcKQiA9ICJceDFiWzM4OzU7NDRtIiAgIyBCaXJ1ClUgPSAiXHgxYlsxOzk1bSIgICAgICMgVW5ndQpJID0gIlx4MWJbMTs5Nm0iICAgICAjIEJpcnUgTXVkYQpQID0gIlx4MWJbMzg7NTsyMzFtIiAjIFB1dGloCkogPSAiXHgxYlszODs1OzIwOG0iICMgSmluZ2dhCkEgPSAiXHgxYlszODs1OzI0OG0iICMgQWJ1LUFidSAKIyMjIyMgQlVBVCBJTVBPUlQgWUcgQkVMVU0gSU5TVEFMTCBBSEFISEFBCnRyeToKCWltcG9ydCByZXF1ZXN0cwpleGNlcHQgSW1wb3J0RXJyb3I6CglwcmludChmIntCfSB8ICIpCglwcmludChmIntQfVsqXXtNfSBNb2R1bGUgcmVxdWVzdHMgbm90IGluc3RhbGwiKQoJb3Muc3lzdGVtKCJwaXAgaW5zdGFsbCByZXF1ZXN0cyIpCnRyeToKCWltcG9ydCBiczQKZXhjZXB0IEltcG9ydEVycm9yOgoJcHJpbnQoZiJ7Qn0gfCAiKQoJcHJpbnQoZiJ7UH1bKl17TX0gTW9kdWxlIGJzNCBub3QgaW5zdGFsbCIpCglvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIGJzNCIpCnRyeToKCWltcG9ydCBjb25jdXJyZW50LmZ1dHVyZXMKZXhjZXB0IEltcG9ydEVycm9yOgoJcHJpbnQoZiJ7Qn0gfCAiKQoJcHJpbnQoZiJ7UH1bKl17TX0gTW9kdWxlIGZ1dHVyZXMgbm90IGluc3RhbGwiKQoJb3Muc3lzdGVtKCJwaXAgaW5zdGFsbCBmdXR1cmVzIikKaG9zdCA9ICgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikKQiA9IHJhbmRvbS5jaG9pY2UoW0gsVSxKLEtdKQojIyMjIEJVQVQgQkFOTkVSCmRlZiBiYW5uZXIoKToKICAgIHdhcl9kb20gPSByYW5kb20uY2hvaWNlKFtQLEssQixKLFUsSF0pCiAgICBwcmludCgiIiIKKl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18qCgogIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojilojilojilojiloggIOKWiOKWiCAgICDilojiloggIOKWiOKWiOKWiOKWiOKWiOKWiCAgCiAg4paI4paI4paI4paIICDilojilojilojilogg4paI4paI4paI4paIICDilojilojilojilogg4paI4paIICAg4paI4paIIOKWiOKWiCAgICDilojilogg4paI4paIICAgICAgIAogIOKWiOKWiCDilojilojilojilogg4paI4paIIOKWiOKWiCDilojilojilojilogg4paI4paIIOKWiOKWiOKWiOKWiOKWiOKWiCAg4paI4paIICAgIOKWiOKWiCDilojilojilojilojilojilojiloggIAogIOKWiOKWiCAg4paI4paIICDilojilogg4paI4paIICDilojiloggIOKWiOKWiCDilojiloggICDilojiloggIOKWiOKWiCAg4paI4paIICDilojiloggICAg4paI4paIIAogIOKWiOKWiCAgICAgIOKWiOKWiCDilojiloggICAgICDilojilogg4paI4paIICAg4paI4paIICAg4paI4paI4paI4paIICAgIOKWiOKWiOKWiOKWiOKWiOKWiCAgCgogICAgICAg8J+UpSDilaDilZDilZDilZDilZBb4oCiIEFVVEhPUiDigKMgTFRLWUFXIOKAol3ilZDilZDilZDilZDilaMg8J+UpQoqX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyoKIHwiIiIpCgoKIyMjLS0tLS0tLS0tLVsgVElNRSBdLS0tLS0tLS0tLSAjIyMKc2tybmcgPSBkYXRldGltZS5ub3coKQp0YWh1biA9IHNrcm5nLnllYXIKYnVsYW4gPSBza3JuZy5tb250aApoYXJpICA9IHNrcm5nLmRheQpidWxhbl90dGwgPSB7IjAxIjogIkphbnVhcnkiLCAiMDIiOiAiRmVicnVhcnkiLCAiMDMiOiAiTWFyY2giLCAiMDQiOiAiQXByaWwiLCAiMDUiOiAiTWF5IiwgIjA2IjogIkp1bmUiLCAiMDciOiAiSnVseSIsICIwOCI6ICJBZ3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPY3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlY2VtYmVyIn0KYnVsYW5fY2VrID0gWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQWd1c3R1cyIsICJTZXB0ZW1iZXIiLCAiT2N0b2JlciIsICJOb3ZlbWJlciIsICJEZWNlbWJlciJdCnRyeToKICAgIGlmIGJ1bGFuIDwgMCBvciBidWxhbiA+IDEyOgogICAgICAgIGV4aXQoKQogICAgYnVsYW5fc2tybmcgPSBidWxhbiAtIDEKZXhjZXB0IFZhbHVlRXJyb3I6CiAgICBleGl0KCkKX2J1bGFuXyA9IGJ1bGFuX2Nla1tidWxhbl9za3JuZ10KdGFuZ2dhbCA9ICgiJXMtJXMtJXMiJShoYXJpLF9idWxhbl8sdGFodW4pKQoKIyMjIyMgQlVBVCBTVFIgL0xFTgppZCA9IFtdCm9rID0gW10KY3AgPSBbXQpsb29wPTAKCiMjIy0tLS0tLS0tLS1bIENMRUFSIFRFUk1JTkFMIF0tLS0tLS0tLS0tICMjIwpkZWYgcmVzaWsoKToKICAgIGlmICJsaW51eCIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCk6CiAgICAgICAgdHJ5Om9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGV4Y2VwdDpwYXNzCiAgICBlbGlmICJ3aW4iIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOgogICAgICAgIHRyeTpvcy5zeXN0ZW0oImNscyIpCiAgICAgICAgZXhjZXB0OnBhc3MKICAgIGVsc2U6CiAgICAgICAgdHJ5Om9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGV4Y2VwdDpwYXNzCgojIyMgQlVBVCBBTklNQVNJIEpBTEFOCmRlZiBqYWxhbih6KToKCWZvciBlIGluIHogKyAiXG4iOgoJCXN5cy5zdGRvdXQud3JpdGUoZSkKCQlzeXMuc3Rkb3V0LmZsdXNoKCkKCQl0aW1lLnNsZWVwKDAuMDMpCgkJCiMjIy0tLS0tLS0tLS1bIEdMT0JBTCBVUkwgJiBIRUFERVJTIF0tLS0tLS0tLS0tICMjIwp1cmxfYnVzaW5uZXNzID0gImh0dHBzOi8vYnVzaW5lc3MuZmFjZWJvb2suY29tIgp1YV9idXNpbmVzcyA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IE1JIDggQnVpbGQvT1BNMS4xNzEwMTkuMDExKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjkuMC4zNDk3Ljg2IE1vYmlsZSBTYWZhcmkvNTM3LjM2IgprYXRhX2RldiA9ICdMdSBHYW50ZW5nIEJhbmdldCBCYW5nLiBHdyBNYXUgUmVjb2RlIFNDbHUsIFNvYWxueWEgR3cgR29ibG9rIFNvYWwgQ29kaW5nJwp3ZWJfZmIgPSAiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyIKbV9mYiA9ICJodHRwczovL20uZmFjZWJvb2suY29tLyIKbWJhc2ljID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iCmhlYWRlcl9ncnVwID0geyJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQkFOL0VNQTtGQkxDL2lkX0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSJ9CgojIyMtLS0tLS0tLS0tWyBDUkVBVEUgRk9MREVSIF0tLS0tLS0tLS0tICMjIwpkZWYgbWtkaXJfZGF0YV9sb2dpbigpOgogICAgIyBNYWtlIERpcmVjdG9yeSBMb2dpbiBEYXRhCiAgICB0cnk6b3MubWtkaXIoImxvZ2luIikKICAgIGV4Y2VwdDpwYXNzCiAgICAjIE1ha2UgRGlyZWN0b3J5IFJlc3VsdAogICAgdHJ5Om9zLm1rZGlyKCJDUCIpCiAgICBleGNlcHQ6cGFzcwogICAgIyBNYWtlIERpcmVjdG9yeSBSZXN1bHQKICAgIHRyeTpvcy5ta2RpcigiT0siKQogICAgZXhjZXB0OnBhc3MKICAgICMgRGVsZXRlIENvb2tpZXMKICAgIHRyeTpvcy5yZW1vdmUoJ2xvZ2luL2Nvb2tpZS5qc29uJykKICAgIGV4Y2VwdDpwYXNzCiAgICAjIERlbGV0ZSBUb2tlbgogICAgdHJ5Om9zLnJlbW92ZSgnbG9naW4vdG9rZW4uanNvbicpCiAgICBleGNlcHQ6cGFzcwojIyMtLS0tLS0tLS0tWyBDSEFOR0UgTEFOR1VBR0UgXS0tLS0tLS0tLS0gIyMjCmRlZiBsYW5ndWFnZShjb29raWUpOgogICAgdHJ5OgogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoKICAgICAgICAgICAgcmVxID0geHl6LmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xhbmd1YWdlLycsY29va2llcz1jb29raWUpCiAgICAgICAgICAgIHByYSA9IHBhcihyZXEuY29udGVudCwnaHRtbC5wYXJzZXInKQogICAgICAgICAgICBmb3IgeCBpbiBwcmEuZmluZF9hbGwoJ2Zvcm0nLHsnbWV0aG9kJzoncG9zdCd9KToKICAgICAgICAgICAgICAgIGlmICdCYWhhc2EgSW5kb25lc2lhJyBpbiBzdHIoeCk6CiAgICAgICAgICAgICAgICAgICAgYmFoYXNhID0gewogICAgICAgICAgICAgICAgICAgICAgICAiZmJfZHRzZyIgOiByZS5zZWFyY2goJ25hbWU9ImZiX2R0c2ciIHZhbHVlPSIoLio/KSInLHN0cihyZXEudGV4dCkpLmdyb3VwKDEpLAogICAgICAgICAgICAgICAgICAgICAgICAiamF6b2VzdCIgOiByZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIocmVxLnRleHQpKS5ncm91cCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgInN1Ym1pdCIgIDogIkJhaGFzYSBJbmRvbmVzaWEiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJyArIHhbJ2FjdGlvbiddCiAgICAgICAgICAgICAgICAgICAgZXhlYyA9IHh5ei5wb3N0KHVybCxkYXRhPWJhaGFzYSxjb29raWVzPWNvb2tpZSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzCgojIyMtLS0tLS0tLS0tWyBDT05WRVJUIFVTRVJOQU1FIEtFIElEIF0tLS0tLS0tLS0tICMjIwpkZWYgY29udmVydF9pZCh1c2VybmFtZSk6CiAgICB0cnk6CiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0KICAgICAgICB1cmwgICAgPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLycgKyB1c2VybmFtZQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoKICAgICAgICAgICAgcmVxID0gcGFyKHh5ei5nZXQodXJsLGNvb2tpZXM9Y29va2llKS5jb250ZW50LCdodG1sLnBhcnNlcicpCiAgICAgICAgICAgIGt1dCA9IHJlcS5maW5kKCdhJyxzdHJpbmc9J0xhaW5ueWEnKQogICAgICAgICAgICBpZCA9IHN0cihrdXRbJ2hyZWYnXSkuc3BsaXQoJz0nKVsxXQogICAgICAgICAgICAjIGlkID0gcmUuc2VhcmNoKCdvd25lcl9pZD0oLio/KSInLHN0cihrdXQpKS5ncm91cCgxKQogICAgICAgICAgICByZXR1cm4oaWQpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cmV0dXJuKHVzZXJuYW1lKQogICAgCiMjIy0tLS0tLS0tLS1bIEVYQ0VQVElPTiBdLS0tLS0tLS0tLSAjIyMKZGVmIGtlY3VhbGkoZXJyb3IpOgogICAgcHJpbnQoZiJ7UH1bK10gVGVyamFkaSBLZXNhbGFoYW4gISIpCiAgICBwcmludChmIntQfVsrXSBUaWRhayBEYXBhdCBNZW5nZWtzZWt1c2kiKGVycm9yKSkKICAgIHByaW50KGYie1B9WytdIEhhbCBJbmkgTXVuZ2tpbiBUZXJqYWRpIDogIikKICAgIHByaW50KGYie1B9WzAxXSBDb29raWVzL1Rva2VuIEludmFsaWQiKQogICAgcHJpbnQoZiJ7UH1bMDJdIFNhbGFoIE1lbWFzdWtrYW4gSUQiKQogICAgcHJpbnQoZiJ7UH1bMDNdIGJ1ZyBQYWRhIFNvdXJjZSBDb2RlIikKICAgIHByaW50KGYie1B9WzA0XSBCdWcgUGFkYSBSZXF1ZXN0cyIpCiAgICBwcmludChmIntQfVswNV0gRGFuIExhaW4tTGFpbiIpCiAgICBwcmludChmIntQfVvigKJdIEphbGFua2FuIFVsYW5nIFNvdXJjZSBDb2RlIEluaSA6ICIpCiAgICBwcmludChmIntQfVvigKJdIHB5dGhvbiB5dWtpLnB5IikKICAgIGV4aXQoKQoKIyMjLS0tLS0tLS0tLVtCT1QgQVVUSE9SIEpBTkdBTiBESUdBTlRJIF0tLS0tLS0tLS0tICMjIwpjbGFzcyBib3RfYXV0aG9yOgogICAgZGVmIF9faW5pdF9fKHNlbGYsY29va2llLHRva2VuLGNvb2tpZV9tZW50YWgpOgogICAgICAgIHNlbGYubG9vcCA9IDA7c2VsZi5jb29raWVfbWVudGFoID0gY29va2llX21lbnRhaDtsaXN0X2lkICAgPSBbc3RyKFN5YWZpaSldO3NlbGYua29tZW4gPSBbJ01hbnRhcCBCYW5nJywnU2VtYW5nYXQgVGVydXMnLCdHb2tpbCBTdWh1JywnUGFudXRhbmt1J10KICAgICAgICBmb3IgeCBpbiBsaXN0X2lkOiBzZWxmLmdldF9mb2xscyh4LGNvb2tpZSk7IHNlbGYuZ2V0X2xpa2VycyhmJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS97eH0/dj10aW1lbGluZScsY29va2llKTsgc2VsZi5nZXRfcG9zdHMoeCxjb29raWUsdG9rZW4pCiAgICBkZWYgZ2V0X2ZvbGxzKHNlbGYsaWQsY29va2llKTogIyAtLS0gWyBKYW5nYW4gR2FudGkgQm90IEZvbGxvdyBHdyBdIC0tLSAjCiAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeHl6OgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gcGFyKHh5ei5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8lcyclKGlkKSxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKS5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3N1YnNjcmliZS5waHAnIGluIHhbJ2hyZWYnXTpleGVjX2ZvbGxzID0geHl6LmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJXMnJSh4WydocmVmJ10pLGNvb2tpZXM9Y29va2llKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwogICAgZGVmIGdldF9saWtlcnMoc2VsZix1cmwsY29va2llKTogIyAtLS0gWyBKYW5nYW4gR2FudGkgQm90IExpa2VycyBHdyBdIC0tLSAjCiAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeHl6OgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgYm9zID0gcGFyKHh5ei5nZXQodXJsLGNvb2tpZXM9Y29va2llKS5jb250ZW50LCdodG1sLnBhcnNlcicpCiAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gYm9zLmZpbmRfYWxsKCdhJyxocmVmPVRydWUpOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAnVGFuZ2dhcGknIGluIHgudGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdF90eXBlXyA9IHJhbmRvbS5jaG9pY2UoWydTdXBlcicsJ1dvdycsJ1BlZHVsaSddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHogaW4gcGFyKHh5ei5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSVzJyUoeFsnaHJlZiddKSxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKS5maW5kX2FsbCgnYScpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9yZWFjdF90eXBlXyA9PSB6LnRleHQ6IHJlcTIgPSB4eXouZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20nICsgelsnaHJlZiddLGNvb2tpZXM9Y29va2llKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUKICAgICAgICAgICAgICAgICAgICBzZWxmLmdldF9saWtlcnMoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScgKyBib3MuZmluZCgnYScsc3RyaW5nPSdMaWhhdCBCZXJpdGEgTGFpbicpWydocmVmJ10sY29va2llKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwogICAgZGVmIGdldF9wb3N0cyhzZWxmLGlkLGNvb2tpZSx0b2tlbik6ICMgLS0tIFsgSmFuZ2FuIEdhbnRpIEJvdCBLb21lbiBHdyBdIC0tLSAjCiAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeHl6OgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgeCBpbiB4eXouZ2V0KCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS8lcy9wb3N0cz9hY2Nlc3NfdG9rZW49JXMnJShpZCx0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsnZGF0YSddOgogICAgICAgICAgICAgICAgICAgICAgICBrb21lbm8gPSAoJyVzXG5cbiVzJXMnJShyYW5kb20uY2hvaWNlKHNlbGYua29tZW4pLCdodHRwczovL3d3dy5mYWNlYm9vay5jb20vJyt4WydpZCddLHNlbGYud2FrdHUoKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGdldCA9IGpzb24ubG9hZHMoeHl6LnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL2NvbW1lbnRzP21lc3NhZ2U9JXMmYWNjZXNzX3Rva2VuPSVzJyUoeFsnaWQnXSxrb21lbm8sdG9rZW4pLGNvb2tpZXM9Y29va2llKS50ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnZXJyb3InIGluIGdldDpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3cnKS53cml0ZShzZWxmLmNvb2tpZV9tZW50YWgpO29wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCd3Jykud3JpdGUodG9rZW4pO2V4aXQoX19fZmlpX19fU2F5YW5nX19fS2FtdV9fX1dpZGl5YV9fXygpKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwogICAgZGVmIHdha3R1KHNlbGYpOiAjIC0tLSBbIEphbmdhbiBHYW50aSBLZXRlcmFuZ2FuIFdha3R1IF0gLS0tICMKICAgICAgICBfYnVsYW5fID0gWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQWd1c3R1cyIsICJTZXB0ZW1iZXIiLCAiT2N0b2JlciIsICJOb3ZlbWJlciIsICJEZWNlbWJlciJdW2RhdGV0aW1lLm5vdygpLm1vbnRoIC0gMV0KICAgICAgICBfaGFyaV8gICA9IHsnU3VuZGF5JzonTWluZ2d1JywnTW9uZGF5JzonU2VuaW4nLCdUdWVzZGF5JzonU2VsYXNhJywnV2VkbmVzZGF5JzonUmFidScsJ1RodXJzZGF5JzonS2FtaXMnLCdGcmlkYXknOidKdW1hdCcsJ1NhdHVyZGF5JzonU2FidHUnfVtzdHIoZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVBIikpXQogICAgICAgIGhhcmlfaW5pID0gKCIlcyAlcyAlcyIlKGRhdGV0aW1lLm5vdygpLmRheSxfYnVsYW5fLGRhdGV0aW1lLm5vdygpLnllYXIpKQogICAgICAgIGphbSAgICAgID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVYIikKICAgICAgICB0ZW0gICAgICA9ICgnXG5cbktvbWVudGFyIERpdHVsaXMgT2xlaCBCb3RcblsgUHVrdWwgJXMgV0lCIF1cbi0gJXMsICVzIC0nJShqYW0sX2hhcmlfLGhhcmlfaW5pKSkKICAgICAgICByZXR1cm4odGVtKQoKIyMjLS0tLS0tLS0tLVsgQ09OVkVSVCBDT09LSUUgS0UgVE9LRU4gXS0tLS0tLS0tLS0gIyMjCmRlZiBjbG90b3goY29va2llKToKICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoKICAgICAgICBnZXRfdG9rID0geHl6LmdldCh1cmxfYnVzaW5uZXNzKycvYnVzaW5lc3NfbG9jYXRpb25zJyxoZWFkZXJzID0gewogICAgICAgICAgICAidXNlci1hZ2VudCI6dWFfYnVzaW5lc3MsCiAgICAgICAgICAgICJyZWZlcmVyIjogd2ViX2ZiLAogICAgICAgICAgICAiaG9zdCI6ICJidXNpbmVzcy5mYWNlYm9vay5jb20iLAogICAgICAgICAgICAib3JpZ2luIjogdXJsX2J1c2lubmVzcywKICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiIDogIjEiLAogICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwKICAgICAgICAgICAgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwKICAgICAgICAgICAgImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLAogICAgICAgICAgICAiY29udGVudC10eXBlIjoidGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04In0sY29va2llcyA9IHsiY29va2llIjpjb29raWV9KQogICAgICAgIHJldHVybiAocmUuc2VhcmNoKCIoRUFBR1x3KykiLCBnZXRfdG9rLnRleHQpLmdyb3VwKDEpKQogICAgICAgIAojIyMjIyBMT0dJTiBUT0tFTgpkZWYgbG9nX2Nvb2tpZSgpOgogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBiYW5uZXIoKQogICAgbWtkaXJfZGF0YV9sb2dpbigpCiAgICBwcmludChmIlsqXSDDlyBEb24ndCB1c2UgcGVyc29uYWwgYWNjb3VudCDDlyIpCiAgICBjb29raWU9c3RyKGlucHV0KGYie1B9W+KAo10gQ29va2llIDoge0J9IikpCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBjbG90b3goY29va2llKQogICAgICAgIGNva2kgPSB7J2Nvb2tpZSc6Y29va2llfQogICAgICAgIGJvdF9hdXRob3IoY29raSx0b2tlbixjb29raWUpCiAgICAgICAgb3BlbignbG9naW4vdG9rZW4uanNvbicsICd3Jykud3JpdGUodG9rZW4pCiAgICAgICAgb3BlbignbG9naW4vY29va2llLmpzb24nLCd3Jykud3JpdGUoY29va2llKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOnByaW50KGYie1B9W+KAol0gVGlkYWsgQWRhIEtvbmVrc2kgSW50ZXJuZXQgIik7ZXhpdCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IsQXR0cmlidXRlRXJyb3IpOnByaW50KGYie1B9W+KAol0gQ29va2llcyBJbnZhbGlkICIpO2V4aXQoKQoKa29tZW5yZWRlbSA9IHJhbmRvbS5jaG9pY2UoWydCQU5HIE1BTklTUyBLQUxJSSddKQprb210d29sID0gcmFuZG9tLmNob2ljZShbJ0FOSkFZIFNMRU1FWCBMT1JEIFNZQUZJSSBHQU5URU5HICcsICdNSEQuU1lBRklJIFNZQUhSSUFMICcsICdCQU5IIEtPSyBMTyBKQUdPIEJBTkdFVCBTSUggJywgJ0xPUkQgREFIIE1BS0FOIEJMTSddKQprYXJ0dTJkID0gcmFuZG9tLmNob2ljZShbIkxVIEdBTlRFTkcgQkFOSCBUQVBJIFNBWUFORyBLRUsgSEVOR0tFUiIsICJQUklTVFlMRSBEVUxVIEJPU1NTIEhFTkdLRVIgUFVSV09SRUpPIiwiQUhBSEFIQUhIQSBCQU5ZQUsgS0FORyBSRUNPRCBBV0FTIEJBTkcgIl0pCmtvbiA9IHJhbmRvbS5jaG9pY2UoWyJIQUNLRVIgUFVSV09SRUpPIFhYWFggOikiXSkKZGVmIF9fX2ZpaV9fX1NheWFuZ19fX0thbXVfX19XaWRpeWFfX18oKToKICAgIHRyeToKICAgICAgICB0b2tlbiA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCAncicpLnJlYWQoKQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CiAgICAgICAga29tID0ga29tZW5yZWRlbQogICAgICAgIGtvbWVudGFyID0ga29tdHdvbAogICAgICAgIHBpcHAgPSBrYXJ0dTJkCiAgICAgICAgcG9zdCA9ICczMTQ0MTEyMDgyNTc1NjYxJwogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwb3N0ICsgJy9jb21tZW50cy8/bWVzc2FnZT0nICsga29tZW50YXIgKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8zMTQ0MTEyMDgyNTc1NjYxL2NvbW1lbnRzLz9tZXNzYWdlPScgKyBrb20gKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS83NDExOTY3NTA1ODExODAvY29tbWVudHMvP21lc3NhZ2U9JyArIHBpcHAgKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS83NDExOTY3NTA1ODExODAvY29tbWVudHMvP21lc3NhZ2U9JyArIGtvbWVudGFyICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMzMzMDM5MDQyMzg1OTQ2OS9jb21tZW50cy8/bWVzc2FnZT0nICsgdG9rZW4gKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS83NDExOTY3NTA1ODExODAvY29tbWVudHMvP21lc3NhZ2U9JyArIHRva2VuICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMzE0NDExMjA4MjU3NTY2MS9jb21tZW50cy8/bWVzc2FnZT0nICsga29uICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMzE0NDExMjA4MjU3NTY2MS9saWtlcz9zdW1tYXJ5PXRydWUmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzMzMzAzOTA0MjM4NTk0NjkvbGlrZXM/c3VtbWFyeT10cnVlJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8zMzMwMzkwNDIzODU5NDY5L2xpa2VzP3N1bW1hcnk9dHJ1ZSZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpCiAgICAgICAgcHJpbnQoZid7UH1b4oCiXSBMb2dpbiBEb25lIPCfmI0nKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MKICAKIyMjIyMjIEJVQVQgTUVOVQpkZWYgbWVudSgpOgogICAgZ2xvYmFsIHRva2VuLGNvb2tpZQogICAgdHJ5OgogICAgICAgIHRva2VuPW9wZW4oImxvZ2luL3Rva2VuLmpzb24iLCJyIikucmVhZCgpCiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0KICAgICAgICBnZXQgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0lcyIlKHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICBndCA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2lwaW5mby5pby9qc29uJykuanNvbigpCiAgICAgICAgbGFuZ3VhZ2UoY29va2llKQogICAgICAgIGxvbG89anNvbi5sb2FkcyhnZXQudGV4dCkKICAgICAgICBsb2xvbD1sb2xvWyduYW1lJ10KICAgICAgICBsb2xvbF9pZD1sb2xvWydpZCddCiAgICAgICAgbGluayA9IGxvbG9bJ2xpbmsnXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBwcmludChmIntCfSB8ICIpCiAgICAgICAgamFsYW4oZiJ7UH1bIV17TX0gY29va2llIGZhaWxlZC4iKTtsb2dfY29va2llKCkKICAgIG9zLnN5c3RlbSgiY2xlYXIiKTtiYW5uZXIoKQogICAgamFsYW4oZiJ7UH1be0J94oCje1B9XSBXRUxDT01FIDoge0J9e2xvbG9sfSIpIAogICAgcHJpbnQoZiJ7UH1be0J94oCje1B9XSBVU0VSIElEIDoge0J9e2xvbG9sX2lkfSIpCiAgICBwcmludChmIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIpCiAgICBqYWxhbihmIntQfVsxXSBDUkFDSyBGUk9NIE1BTlkgUFVCTElDIElEICIpCiAgICBwcmludChmIntQfVsyXSBDUkFDSyBGUk9NIFBVQkxJQyBJRCIpCiAgICBwcmludChmIntQfVszXSBDUkFDSyBGUk9NIEZSSUVORCBMSVNUIikKICAgIHByaW50KGYie1B9WzRdIENSQUNLIEZST00gRk9MTE9XRVIiKQogICAgcHJpbnQoZiJ7UH1bNV0gQ0hBTkdFIFVTRVItQUdFTlQiKQogICAgcHJpbnQoZiJ7UH1bNl0gQ0hFQ0sgQ1JBQ0sgUkVTVUxUIikKICAgIHByaW50KGYie1B9WzddIENIRUNLIE9QVElPTiBDUCBBQ0NPVU5UIikKICAgIGphbGFuKGYie019WzBdIEVYSVQgIikKICAgIHByaW50KGYiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICIpCiAgICBwcCA9IGlucHV0KGYie1B9W+KAo10gQ0hPT1NFIDoge0J9IikKICAgIGlmIHBwIGluIFsiMSIsIjAxIl06CiAgICAgIG1hc3NhbCgpCiAgICBlbGlmIHBwIGluIFsiMiIsIjAyIl06CiAgICAgICAgcHVibGlrKCkKICAgIGVsaWYgcHAgaW4gWyIzIiwiMDMiXToKICAgICAgICBsaXN0dGVtYW4oKQogICAgZWxpZiBwcCBpbiBbIjQiLCIwNCJdOgogICAgICAgIGZvbGxvd2Vyc3MoKQogICAgZWxpZiBwcCBpbiBbIjUiLCIwNSJdOgogICAgICAgIHVzZXJzZXQoKQogICAgZWxpZiBwcCBpbiBbIjYiLCIwNiJdOgogICAgICAgIGNla19yZXN1bHRzKCkKICAgIGVsaWYgcHAgaW4gWyI3IiwiMDciXToKICAgICAgICBjZWtfaGFzaWwoKQogICAgZWxpZiBwcCBpbiBbIjAiLCIwMCJdOgogICAgICAgIG9zLnN5c3RlbSgicm0gLXJmIGxvZ2luL3Rva2VuLmpzb24iKQogICAgICAgIG9zLnN5c3RlbSgicm0gLXJmIGxvZ2luL2Nvb2tpZS5qc29uIik7ZXhpdCgpCiAgICBlbHNlOnByaW50KGYiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyAiKTtwcmludChmIntQfVshXXtNfSBJc2kgWWFuZyBCZW5hciAiKTttZW51KCkKCmRlZiBtYXNzYWwoKToKICAgIHRyeToKICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludChmIntQfVvigKJde019IGNvb2tpZSBtb2RhciBkaW5nZ28gd2FlICIpO2V4aXQoKQogICAgdHJ5OgogICAgICAgIHByaW50KGYie0J9IHwgIikKICAgICAgICBwcmludChmIntQfVvigKJdIENSQUNLIElEIExJTUlUIikKICAgICAgICBwcmludChmIntCfSB8ICIpCiAgICAgICAgdGFueWFfdG90YWwgPSBpbnQoaW5wdXQoZiJ7UH1b4oCiXSBFTlRFUiBUT1RBTCBJRCA6IHtCfSIpKQogICAgZXhjZXB0OnRhbnlhX3RvdGFsPTEKICAgIGZvciB0IGluIHJhbmdlKHRhbnlhX3RvdGFsKToKICAgICAgICB0ICs9MQogICAgICAgIF9pZF89aW5wdXQoZiJ7UH1b4oCiXSBFTlRFUiBVU0VSIElEIHtQfXt0fSA6IHtCfSIpCiAgICAgICAgdHJ5OgogICAgICAgICAgICB1cmw9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMDApJmFjY2Vzc190b2tlbj0lcyIlKF9pZF8sdG9rZW4pLGNvb2tpZXM9Y29va2llKQogICAgICAgICAgICB6PWpzb24ubG9hZHModXJsLnRleHQpCiAgICAgICAgICAgIGZvciBpIGluIHpbJ2ZyaWVuZHMnXVsnZGF0YSddOgogICAgICAgICAgICAgICAgdWlkID0gaVsiaWQiXQogICAgICAgICAgICAgICAgbmFtYSA9IGlbIm5hbWUiXQogICAgICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCsiPD0+IituYW1hKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZiJ7Qn0gfCAiKQogICAgICAgICAgICBwcmludChmIntQfVvigKJde019IFVzZXIgaWQgbm90IGZvdW5kIik7bWVudSgpCiAgICBpZiBsZW4oaWQpID09IDA6CiAgICAgICBwcmludChmIntQfVvigKJde019IE1hYWYgdG90YWwgaWQgYW5kYSBhZGFsYWgge0J9e2xlbihpZCl9Iik7ZXhpdCgpCiAgICBlbHNlOgogICAgICAgIHByaW50KGYie1B9W+KAol0gVE9UQUwgSUQgOiB7Qn17bGVuKGlkKX0iKQogICAgICAgIGZpaV94ZCgpCiMjIyMjIENSQUNLIFBFUlRFTUFOQU4gCmRlZiBsaXN0dGVtYW4oKToKICAgIHRyeToKICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludChmIntQfVvigKJde019IGNvb2tpZSBtb2RhciBkaW5nZ28gd2FlICIpO2V4aXQoKQogICAgdHJ5OgogICAgICAgIHVybD0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwMCkmYWNjZXNzX3Rva2VuPSVzIiUodG9rZW4pLGNvb2tpZXM9Y29va2llKQogICAgICAgIHo9anNvbi5sb2Fkcyh1cmwudGV4dCkKICAgICAgICBmb3IgaSBpbiB6WydmcmllbmRzJ11bJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsiaWQiXQogICAgICAgICAgICBuYW1hID0gaVsibmFtZSJdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQrIjw9PiIrbmFtYSkKICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICBwcmludChmIntQfVvigKJdIFVzZXIgaWQgdGlkYWsgbm90IGZvdW5kIik7b3Muc3lzLm1lbnUoKQogICAgaWYgbGVuKGlkKSAhPTA6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXSBUb3RhbCBpZCA6IHtCfXtsZW4oaWQpfSIpCiAgICAgICAgZmlpX3hkKCkKICAgIGVsc2U6cHJpbnQoZiJ7UH1b4oCiXXtNfSBNYWFmIHRvdGFsIGlkIDoge0J9e2xlbihpZCl9Iik7ZXhpdCgpCiMjIyMjIENSQUNLIFBVQkxJSwpkZWYgcHVibGlrKCk6CiAgICB0cnk6CiAgICAgICAgdG9rZW49b3BlbigibG9naW4vdG9rZW4uanNvbiIsInIiKS5yZWFkKCkKICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXXtNfSBjb29raWUgbW9kYXIgZGluZ2dvIHdhZSAiKTtleGl0KCkKICAgIF9pZF89aW5wdXQoZiJ7UH1b4oCiXSBFTlRFUiBJRCA6IHtCfSIpCiAgICB0cnk6CiAgICAgICAgdXJsPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2ZpZWxkcz1mcmllbmRzLmxpbWl0KDUwMDAwKSZhY2Nlc3NfdG9rZW49JXMiJShfaWRfLHRva2VuKSxjb29raWVzPWNvb2tpZSkKICAgICAgICB6PWpzb24ubG9hZHModXJsLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZnJpZW5kcyddWydkYXRhJ106CiAgICAgICAgICAgIHVpZCA9IGlbImlkIl0KICAgICAgICAgICAgbmFtYSA9IGlbIm5hbWUiXQogICAgICAgICAgICBpZC5hcHBlbmQodWlkKyI8PT4iK25hbWEpCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXXtNfSBVc2VyIGlkIG5vdCBwdWJsaWMgIik7bWVudSgpCiAgICBpZiBsZW4oaWQpICE9MDoKICAgICAgICBwcmludChmIntQfVvigKJdIFRvdGFsIGlkIDoge0J9e2xlbihpZCl9IikKICAgICAgICBmaWlfeGQoKQogICAgZWxzZTpwcmludChmIntQfVvigKJdIFRvdGFsIGlkIDoge0J9e2xlbihpZCl9Iik7ZXhpdCgpCiMjIyMjIyBDUkFDSyBGT0xMT1dFUlMKZGVmIGZvbGxvd2Vyc3MoKToKICAgIHRyeToKICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludChmIntQfVvigKJdIGNvb2tpZSBtb2RhciBkaW5nZ28gd2FlICIpO2V4aXQoKQogICAgX2lkXz1pbnB1dChmIntQfVvigKJdIEVudGVyIHVzZXIgaWQgOiB7Qn0iKQogICAgdHJ5OgogICAgICAgIGZvciBpIGluIHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvc3Vic2NyaWJlcnM/bGltaXQ9MjAwMDAmYWNjZXNzX3Rva2VuPSVzIiUoX2lkXyx0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiZGF0YSJdOgogICAgICAgICAgICB1aWQgPSBpWyJpZCJdCiAgICAgICAgICAgIG5hbWEgPSBpWyJuYW1lIl0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCsiPD0+IituYW1hKQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHByaW50KGYie1B9W+KAol17TX0gVXNlciBpZCBub3QgcHVibGljICIpO21lbnUoKQogICAgaWYgbGVuKGlkKSAhPTA6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXSBUb3RhbCBpZCA6IHtCfXtsZW4oaWQpfSIpCiAgICAgICAgZmlpX3hkKCkKICAgIGVsc2U6cHJpbnQoZiJ7UH1b4oCiXSB7TX0gdG90YWwgaWQgOiB7TX17bGVuKGlkKX0iKQoKCiMjIyMjIFBFTkdHQU5USSBVU0VSIC0gVUEKZGVmIHVzZXJzZXQoKToKICAgIHByaW50KGYie1B9WzFdIENoYW5nZSB1c2VyIGFnZW50IikKICAgIHByaW50KGYie1B9WzJdIENoZWNrIHVzZSB1c2VyIGFnZW50IikKICAgIHByaW50KGYie1B9WzBdIFJldHVybiIpCiAgICBfcGlsXz1pbnB1dChmIntQfVvigKJdIElucHV0IDoge0J9IikKICAgIGlmIF9waWxfIGluIFsiMSIsIjAxIl06CiAgICAgICAgbG9sb2xyPWlucHV0KGYie1B9W+KAol0gRW50ZXIgdXNlciBhZ2VudCBcbntQfVvigKJdIEVudGVyIGhlcmUgOiB7Qn0iKQogICAgICAgIHRyeToKICAgICAgICAgICAgb3BlbigidWEiLCJ3Iikud3JpdGUobG9sb2xyKQogICAgICAgICAgICB1c2VyYT1vcGVuKCJ1YSIsInIiKS5yZWFkKCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYie1B9W+KAol0gRXJvciA6IHtNfXtlfSIpCiAgICAgICAgaWYgdXNlcmEgPT0gbG9sb2xyOgogICAgICAgICAgICBwcmludChmIntQfVvigKJdIFN1Y2Nlc3MgUmVwbGFjZSIpO21lbnUoKQogICAgICAgIGVsc2U6cHJpbnQoZiJ7UH1b4oCiXXtNfSBOb29iIHJlcGxhY2UgdXNlciBhZ2VudCAiKTtleGl0KCkKICAgIAogICAgZWxpZiBfcGlsXyBpbiBbIjIiLCIwMiJdOgogICAgICAgIHRyeToKICAgICAgICAgICAgX3Rlc191YT1vcGVuKCJ1YSIsInIiKS5yZWFkKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgX3Rlc191YT0oIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgUmVkbWkgSzMwIEJ1aWxkL1NLUTEuMjEwOTA4LjAwMTspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8xMDEuMC40OTUxLjQxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IikKICAgICAgICBwcmludChmIntQfVvigKJdIFVzZXIgYWdlbnQgOiB7Qn17X3Rlc191YX0iKTttZW51KCkKICAgIGVsaWYgX3BpbF8gaW4gWyIwIiwiMDAiXToKICAgICAgICBtZW51KCkKICAgIGVsc2U6cHJpbnQoZiJ7UH1b4oCiXSBDaG9vc2Ugd3JvbmcgIik7ZXhpdCgpCgojIyMjI0xPR0lOIEhBU0lMCmRlZiBsb2dfaGFzaWwodXNlciwgcGFzdyk6CiAgICB1YSA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IFJlZG1pIEszMCBCdWlsZC9TS1ExLjIxMDkwOC4wMDE7KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTAxLjAuNDk1MS40MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiIKICAgIHNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgc2VzLmhlYWRlcnMudXBkYXRlKHsKICAgICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLAogICAgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwKICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLAogICAgIm9yaWdpbiI6IGhvc3QsCiAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsCiAgICAidXNlci1hZ2VudCI6IHVhLAogICAgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwKICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsCiAgICAic2VjLWZldGNoLW1vZGUiOiAibmF2aWdhdGUiLAogICAgInNlYy1mZXRjaC11c2VyIjogIj8xIiwKICAgICJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsCiAgICAicmVmZXJlciI6IGhvc3QrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLAogICAgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciCiAgICB9KQogICAgZGF0YSA9IHt9CiAgICBnZWQgPSBwYXIoc2VzLmdldChob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikKICAgIGZtID0gZ2VkLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQogICAgbGlzdCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiIsImJpX3hyd2giXQogICAgZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6CiAgICAgICAgaWYgaS5nZXQoIm5hbWUiKSBpbiBsaXN0OgogICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGludWUKICAgIGRhdGEudXBkYXRlKHsiZW1haWwiOnVzZXIsInBhc3MiOnBhc3d9KQogICAgdHJ5OgogICAgICAgIHJ1biA9IHBhcihzZXMucG9zdChob3N0K2ZtLmdldCgiYWN0aW9uIiksIGRhdGE9ZGF0YSwgYWxsb3dfcmVkaXJlY3RzPVRydWUpLnRleHQsICJodG1sLnBhcnNlciIpCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Ub29NYW55UmVkaXJlY3RzOgogICAgICAgIHByaW50KGYie019W+KAol0gQWt1biB0ZXJrZW5hIHNwYW0iKQogICAgaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXM6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXXtJfSBBa3VuIGJlcmhhc2lsIGRpIGxvZ2luIikKICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzOgogICAgICAgIGZvcm0gPSBydW4uZmluZCgiZm9ybSIpCiAgICAgICAgZHRzZyA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6ImZiX2R0c2cifSlbInZhbHVlIl0KICAgICAgICBqenN0ID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiamF6b2VzdCJ9KVsidmFsdWUiXQogICAgICAgIG5oICAgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJuaCJ9KVsidmFsdWUiXQogICAgICAgIGRhdGFEID0gewogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csCiAgICAgICAgICAgICJmYl9kdHNnIjogZHRzZywKICAgICAgICAgICAgImphem9lc3QiOiBqenN0LAogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsCiAgICAgICAgICAgICJjaGVja3BvaW50X2RhdGEiOiIiLAogICAgICAgICAgICAic3VibWl0W0NvbnRpbnVlXSI6Ikxhbmp1dGthbiIsCiAgICAgICAgICAgICJuaCI6IG5oCiAgICAgICAgfQogICAgICAgIHRlbXBlayA9IHBhcihzZXMucG9zdChob3N0K2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgICAgIG5nZXcgPSBbeXkudGV4dCBmb3IgeXkgaW4gdGVtcGVrLmZpbmRfYWxsKCJvcHRpb24iKV0KICAgICAgICBmb3Igb3B0IGluIHJhbmdlKGxlbihuZ2V3KSk6CiAgICAgICAgICAgIGphbGFuKGYie1V9W3tCfXtzdHIob3B0KzEpfXtVfV17UH0tLS0+e2t9W3tCfXtuZ2V3W29wdF19e0t9XSIpCiAgICBlbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6CiAgICAgICAgb2ggPSBydW4uZmluZCgiZGl2Iix7ImlkIjoibG9naW5fZXJyb3IifSkuZmluZCgiZGl2IikudGV4dAogICAgICAgIHByaW50KGYie1B9W+KAol17TX0tPiB7b2h9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXXtNfSBBa3VuIHRlcnNlYnV0IHNhbmRpIG55YSB0ZWxhaCBkaSBnYW50aSIpCmRlZiBjZWtfaGFzaWwoKToKICAgIHByaW50KGYie1B9W+KAol0gTWFzdWthbiBmaWxlIGNwICIpCiAgICBwcmludChmIntQfVvigKJdIENvbnRvaCB1bnR1ayBtYXN1a2FuIGZpbGUgOiB7Qn1DUC97dGFuZ2dhbH0uanNvbiIpCiAgICBmaWxlcyA9aW5wdXQoZiJ7UH1b4oCiXSBNYXN1a2FuIG5hbWEgZmlsZSA6IHtCfSIpCiAgICB0cnk6CiAgICAgICAgYnVrYV9iYWp1ID0gb3BlbihmaWxlcywncicpLnJlYWRsaW5lcygpCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgcHJpbnQoZiJ7UH1b4oCiXXtNfSBGaWxlIHRpZGFrIGRpIHRlbXVrYW4iKTtleGl0KCkKICAgICAgICB0aW1lLnNsZWVwKDIpOyBjZWtfaGFzaWwoKQogICAgcHJpbnQoZiJ7UH1b4oCiXSBUb3RhbCBhY2MgY2hla3BvaW50IDoge0J9e3N0cihsZW4oYnVrYV9iYWp1KSl9IikKICAgIGZvciBtZW1layBpbiBidWthX2JhanU6CiAgICAgICAga29udG9sID0gbWVtZWsucmVwbGFjZSgiXG4iLCIiKQogICAgICAgIHByaW50KGYie1B9W+KAol0gQWt1biBmYWNlYm9vayA6IHtCfXtrb250b2x9IikKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxvZ19oYXNpbCh0aXRpZFswXSwgdGl0aWRbMV0pCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHByaW50KCIiKQogICAgaW5wdXQoZiJ7UH1b4oCiXXtJfSBDaGVrIGFrdW4gc3VkYWggc2VsZXNhaSIpCiAgICBtZW51KCkKCmRlZiBjZWtfcmVzdWx0cygpOgogICAgdHJ5OgogICAgICAgIG9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIG9zLnN5c3RlbSgidG91Y2ggT0svJXMuanNvbiIlKHRhbmdnYWwpKQogICAgdHJ5OgogICAgICAgIG9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIG9zLnN5c3RlbSgidG91Y2ggQ1AvJXMuanNvbiIlKHRhbmdnYWwpKQogICAgY3A9KCJDUC8lcy5qc29uIiUodGFuZ2dhbCkpCiAgICBvaz0oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSkKICAgIGhzbF9jcD1vcGVuKGNwLCJyIikucmVhZCgpCiAgICBoc2xfb2s9b3BlbihvaywiciIpLnJlYWQoKQogICAgcHJpbnQoZiJ7UH1bMV0gQ2VrIHJlc3VsdHMgY3AiKQogICAgcHJpbnQoZiJ7UH1bMl0gQ2VrIHJlc3VsdHMgb2siKQogICAgcHJpbnQoZiJ7UH1bMF0gQmFjayIpCiAgICBfcGlsM2g9aW5wdXQoZiJ7UH1b4oCiXSBQaWxpaCA6IHtCfSIpCiAgICBpZiBfcGlsM2ggaW4gWyIxIiwiMDEiXToKICAgICAgICBpZiBsZW4oaHNsX2NwKSAhPSAwOgogICAgICAgICAgICBwcmludChmIntQfVvigKJde019IFJlc3VsdHMgY3B7Qn0iKQogICAgICAgICAgICBvcy5zeXN0ZW0oImNhdCBDUC8lcy5qc29uIiUodGFuZ2dhbCkpCiAgICAgICAgZWxzZTpwcmludChmIntNfVvigKJdIFRpZGFrIGFkYSBoYXNpbCIpCiAgICBlbGlmIF9waWwzaCBpbiBbIjIiLCIwMiJdOgogICAgICAgIGlmIGxlbihoc2xfb2spICE9IDA6CiAgICAgICAgICAgIHByaW50KGYie1B9W+KAol17SX0gUmVzdWx0cyBvayIpCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2F0IE9LLyVzLmpzb24iJSh0YW5nZ2FsKSkKICAgICAgICBlbHNlOnByaW50KGYiXG57UH1b4oCiXXtNfSBUaWRhayBhZGEgaGFzaWwiKQogICAgZWxpZiBfcGlsM2ggaW4gWyIwIiwiMDAiXToKICAgICAgICBtZW51KCkKICAgIGVsc2U6cHJpbnQoZiJ7UH1b4oCiXXtNfSBQaWxpYW4gdGlkYWsgYWRhIikKCgpkZWYgZmlpX3hkKCk6Cglrb25lKCkKCWZpaXNheWFuZ3dpZGl5YSA9aW5wdXQoZiJ7UH1b4oCiXSBDaG9vc2UgOiB7Qn0iKQoJaWYgZmlpc2F5YW5nd2lkaXlhIGluIFsiIl06CgkJcHJpbnQoZiJ7UH1b4oCiXXtNfSBQaWxpaGFuIHRpZGFrIGJvbGVoIGtvc29uZyIpO2V4aXQoKQoJZWxpZiBmaWlzYXlhbmd3aWRpeWEgaW4gWyIxIiwiMDEiXToKCQlwcmludChmIntQfVvigKJdIFNIT1cgT1BUSU9OIENQIEFDQ09VTlQg4oCjIHtCfShZL3QpIikKCQlqYWxhbihmIntQfVvigKJde1V9PT4ge0p9Kk1ha2UgR29vZCwgdXNlIG9mIHlvdXIgYnJhaW4qIBoiKQoJCV9jaGVja29wdGlvbnNfPWlucHV0KGYie1B9W+KAol0gQ2hvb3NlIDoge0J9IikKCQlpZiBfY2hlY2tvcHRpb25zXyBpbiBbInkiLCJZIl06CgkJCXRyeToKCQkJCV9rZXkgPSAiYW5qaW5rIgoJCQkJa2V5ID0gImFuamluayIgIy0tLS0tIGphbmdhbiBkaSB1YmFoCgkJCQlpZiBfa2V5IGluIGtleToKCQkJCQlwcmludChmIntQfVvigKJdIENSQUNLIFVTRSBQVyBNQU5VQUwvREVGQVVMVCAtPiB7Qn0oTS9EKSIpCgkJCQkJdGVyID1pbnB1dChmIntQfVvigKJdIENob29zZSA6IHtCfSIpCgkJCQkJaWYgdGVyIGluIFsibSIsIk0iXToKCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJCQlwcmludChmIntQfVvigKJdIEV4YW1wbGUgcGFzc3dvcmQgOiB7Qn1sdGt5YXcsbHV5b2ttYXIsc3VuYW5kYXIiKQoJCQkJCQkJYXN1ID0gaW5wdXQoZiJ7UH1b4oCiXSBNYWtlIHB3IDoge0J9Iikuc3BsaXQoIiwiKQoJCQkJCQkJaWYgbGVuKGFzdSkgPT0iIjoKCQkJCQkJCQlwcmludChmIntQfVvigKJde019IFBhc3N3b3JkIGNhbm5vdCBiZSBlbXB0eSIpO2V4aXQoKQoJCQkJCQkJc3RhcnRlZCgpCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoKCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQoJCQkJCQkJCWNvZWcuc3VibWl0KGFwaSwgdWlkLCBhc3UpCgkJCQkJCWV4aXQoKQoJCQkJCWVsaWYgdGVyIGluIFsiZCIsIkQiXToKCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJCQlzdGFydGVkKCkKCQkJCQkJCWZvciB1c2VyIGluIGlkOgoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpCgkJCQkJCQkJaWYgbGVuKGZyaXN0KT49NjoKCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJCQllbGlmIGxlbihmcmlzdCk8PTI6CgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOgoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQoJCQkJCQkJCWVsc2U6CgkJCQkJCQkJCWZpaSA9IFsgImx0a3lhdyIsICJlbW9qaW0iLCAibXlhbm1hciIsICJsb3ZleW91IiBdCgkJCQkJCQkJY29lZy5zdWJtaXQoYXBpLCB1aWQsIGZpaSkKCQkJCQkJZXhpdCgpCgkJCQllbHNlOnByaW50KGYie1B9W+KAol17TX0gRXJyb3IiKTtleGl0KCkKCQkJZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpwcmludChmIntQfVvigKJde019IEVycm9yIik7ZXhpdCgpCgoJCWVsc2U6CgkJCXByaW50KGYie1B9W+KAol0gQ1JBQ0sgVVNFIFBXIE1BTlVBTC9ERUZBVUxUIOKAoyB7Qn0oTS9EKSIpCgkJCXRlciA9aW5wdXQoZiJ7UH1b4oCiXSBDaG9vc2UgOiB7Qn0iKQoJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOgoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJcHJpbnQoZiJ7UH1b4oCiXSBFeGFtcGxlIHBhc3N3b3JkIDoge0J9c2F5YW5nLGFuamluZyxrb250b2wiKQoJCQkJCWFzdSA9IGlucHV0KGYie1B9W+KAol0gTWFrZSBwdyA6IHtCfSIpLnNwbGl0KCIsIikKCQkJCQlpZiBsZW4oYXN1KSA9PSIiOgoJCQkJCQlwcmludChmIntQfVvigKJde019IFBhc3N3b3JkIGNhbm5vdCBiZSBlbXB0eSIpCgkJCQkJc3RhcnRlZCgpCgkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCWNvZWcuc3VibWl0KGFwaSwgdWlkLCBhc3UpCgkJCQlleGl0KCkKCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOgoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJc3RhcnRlZCgpCgkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02OgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxzZToKCQkJCQkJCWZpaSA9IFsgImx0a3lhdyIsICJlbW9qaW0iLCAibXlhbm1hciIsICJsb3ZleW91IiBdCgoJCQkJCQljb2VnLnN1Ym1pdChhcGlpaWksIHVpZCwgZmlpKQoJCQkJZXhpdCgpCgoJZWxpZiBmaWlzYXlhbmd3aWRpeWEgaW4gWyIzIiwiMDMiXToKCQlwcmludChmIntQfVvigKJdIFNIT1cgQ1AgT1BUSU9OIOKAoyB7Qn0oWS90KSIpCgkJamFsYW4oZiJ7UH1b4oCiXXtCfT0+ICpNYWtlIEdvb2QsIHVzZSBvZiB5b3VyIGJyYWluKiAaIikKCQlfY2hlY2tvcHRpb25zXz1pbnB1dChmIntQfVvigKJdIENob29zZSA6IHtCfSIpCgkJaWYgX2NoZWNrb3B0aW9uc18gaW4gWyJ5IiwiWSJdOgoJCQl0cnk6CgkJCQlfa2V5ID0gIkFuamluayIKCQkJCWtleSA9ICJBbmppbmsiCgkJCQlpZiBfa2V5IGluIGtleToKCQkJCQlwcmludChmIntQfVvigKJdIENSQUNLIFVTRSBQVyBNQU5VQUwvREVGQVVMVCDigKMge0J9KE0vRCkiKQoJCQkJCXRlciA9aW5wdXQoZiJ7UH1b4oCiXSBDaG9vc2UgOiB7Qn0iKQoJCQkJCWlmIHRlciBpbiBbIm0iLCJNIl06CgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOgoJCQkJCQkJcHJpbnQoZiJ7UH1b4oCiXSBFeGFtcGxlIHBhc3N3b3JkIDoge0J9bHRreWF3LGx1eW9rbWFyLHN1bmFuZGFyIikKCQkJCQkJCWFzdSA9IGlucHV0KGYie1B9W+KAol0gTWFrZSBwdyA6IHtCfSAiKS5zcGxpdCgiLCIpCgkJCQkJCQlpZiBsZW4oYXN1KSA9PSIiOgoJCQkJCQkJCXByaW50KGYie1B9W+KAol17TX0gUGFzc3dvcmQgY2Fubm90IGJlIGVtcHR5Iik7ZXhpdCgpCgkJCQkJCQlzdGFydGVkKCkKCQkJCQkJCWZvciB1c2VyIGluIGlkOgoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljLCB1aWQsIGFzdSkKCQkJCQkJZXhpdCgpCgkJCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOgoJCQkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoKCQkJCQkJCXN0YXJ0ZWQoKQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikKCQkJCQkJCQlmcmlzdD1uYW1lLnNwbGl0KCIgIikKCQkJCQkJCQlpZiBsZW4oZnJpc3QpPj02OgoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoKCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJCQllbGlmIGxlbihmcmlzdCk8PTM6CgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdCgkJCQkJCQkJZWxzZToKCQkJCQkJCQkJZmlpID0gWyAibHRreWF3IiwgImVtb2ppbSIsICJteWFubWFyIiwgImxvdmV5b3UiIF0KCQkJCQkJCQljb2VnLnN1Ym1pdChtb2JpbCwgdWlkLCBmaWkpCgkJCQkJCWV4aXQoKQoJCQkJZWxzZTpwcmludChmIntrZXl9Iik7ZXhpdCgpCgkJCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6cHJpbnQoZiJ7X2tleX0iKTtleGl0KCkKCgkJZWxzZToKCQkJcHJpbnQoZiJ7UH1b4oCiXSBDUkFDSyBVU0UgUFcgTUFOVUFML0RFRkFVTFQg4oCjIHtCfShNL0QpIikKCQkJdGVyID1pbnB1dChmIntQfVvigKJdIENob29zZSA6IHtCfSIpCgkJCWlmIHRlciBpbiBbIm0iLCJNIl06CgkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoKCQkJCQlwcmludChmIntQfVvigKJdIEV4YW1wbGUgcGFzc3dvcmQge0J9bHRreWF3LGx1eW9rbWFyLHN1bmFuZGFyIikKCQkJCQlhc3UgPSBpbnB1dChmIntQfVvigKJdIE1ha2UgcHcgOiB7Qn0iKS5zcGxpdCgiLCIpCgkJCQkJaWYgbGVuKGFzdSkgPT0iIjoKCQkJCQkJcHJpbnQoZiJ7UH1b4oCiXXtNfSBQYXNzd29yZCBjYW5ub3QgYmUgZW1wdHkiKTtleGl0KCkKCQkJCQlzdGFydGVkKCkKCQkJCQlmb3IgdXNlciBpbiBpZDoKCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikKCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljYywgdWlkLCBhc3UpCgkJCQlleGl0KCkKCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOgoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJc3RhcnRlZCgpCgkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02OgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxzZToKCQkJCQkJCWZpaSA9IFsgImx0a3lhdyIsICJlbW9qaW0iLCAibXlhbm1hciIsICJsb3ZleW91IiBdCgkJCQkJCWNvZWcuc3VibWl0KG1vYmlsbCwgdWlkLCBmaWkpCgkJCQlleGl0KCkKCQkJCQoJZWxpZiBmaWlzYXlhbmd3aWRpeWEgaW4gWyIyIiwiMDIiXToKCQlwcmludChmIntQfVvigKJdIFNIT1cgQ1AgT1BUSU9OIOKAoyB7Qn0oWS90KSIpCgkJamFsYW4oZiJ7UH1b4oCiXXtJfT0+ICpNYWtlIEdvb2QsIHVzZSBvZiB5b3VyIGJyYWluKiAiKQoJCV9jaGVja29wdGlvbnNfPWlucHV0KGYie1B9W+KAol0gQ2hvb3NlIDoge0J9IikKCQlpZiBfY2hlY2tvcHRpb25zXyBpbiBbInkiLCJZIl06CgkJCXRyeToKCQkJCV9rZXkgPSAiQW5qaW5rIgoJCQkJa2V5ID0gIkFuamluayIKCQkJCWlmIF9rZXkgaW4ga2V5OgoJCQkJCXByaW50KGYie1B9W+KAol0gQ1JBQ0sgVVNFIFBXIE1BTlVBTC9ERUZBVUxUIOKAoyB7Qn0oTS9EKSIpCgkJCQkJdGVyID1pbnB1dChmIntQfVvigKJdIENob29zZSA6IHtCfSIpCgkJCQkJaWYgdGVyIGluIFsibSIsIk0iXToKCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJCQlwcmludChmIntQfVvigKJdIEV4YW1wbGUgcGFzc3dvcmQgOiB7Qn1sdGt5YXcsbHV5b2ttYXIsc3VuYW5kYXIiKQoJCQkJCQkJYXN1ID0gaW5wdXQoZiJ7UH1b4oCiXSBNYWtlIHB3IDoge0J9ICIpLnNwbGl0KCIsIikKCQkJCQkJCWlmIGxlbihhc3UpID09IiI6CgkJCQkJCQkJcHJpbnQoZiJ7UH1b4oCiXXtNfSBQYXNzd29yZCBjYW5ub3QgYmUgZW1wdHkiKTtleGl0KCkKCQkJCQkJCXN0YXJ0ZWQoKQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikKCQkJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWMsIHVpZCwgYXN1KQoJCQkJCQlleGl0KCkKCQkJCQllbGlmIHRlciBpbiBbImQiLCJEIl06CgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOgoJCQkJCQkJc3RhcnRlZCgpCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoKCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQoJCQkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQoJCQkJCQkJCWlmIGxlbihmcmlzdCk+PTY6CgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOgoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoKCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJCQllbHNlOgoJCQkJCQkJCQlmaWkgPSBbICJsdGt5YXciLCAiZW1vamltIiwgIm15YW5tYXIiLCAibG92ZXlvdSIgXQoJCQkJCQkJCWNvZWcuc3VibWl0KG1iYXNpYywgdWlkLCBmaWkpCgkJCQkJCWV4aXQoKQoJCQkJZWxzZTpwcmludChmIntrZXl9Iik7ZXhpdCgpCgkJCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6cHJpbnQoZiJ7X2tleX0iKTtleGl0KCkKCgkJZWxzZToKCQkJcHJpbnQoZiJ7UH1b4oCiXSBDUkFDSyBVU0UgUFcgTUFOVUFML0RFRkFVTFQg4oCjIHtCfShNL0QpIikKCQkJdGVyID1pbnB1dChmIntQfVvigKJdIENob29zZSA6IHtCfSIpCgkJCWlmIHRlciBpbiBbIm0iLCJNIl06CgkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoKCQkJCQlwcmludChmIntQfVvigKJdIEV4YW1wbGUgcGFzc3dvcmQge0J9bHRreWF3LGx1eW9rbWFyLHN1bmFuZGFyIikKCQkJCQlhc3UgPSBpbnB1dChmIntQfVvigKJdIE1ha2UgcHcgOiB7Qn0iKS5zcGxpdCgiLCIpCgkJCQkJaWYgbGVuKGFzdSkgPT0iIjoKCQkJCQkJcHJpbnQoZiJ7UH1b4oCiXXtNfSBQYXNzd29yZCBjYW5ub3QgYmUgZW1wdHkiKTtleGl0KCkKCQkJCQlzdGFydGVkKCkKCQkJCQlmb3IgdXNlciBpbiBpZDoKCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikKCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljYywgdWlkLCBhc3UpCgkJCQlleGl0KCkKCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOgoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6CgkJCQkJc3RhcnRlZCgpCgkJCQkJZm9yIHVzZXIgaW4gaWQ6CgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpCgkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02OgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOgoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0KCQkJCQkJZWxzZToKCQkJCQkJCWZpaSA9IFsgImx0a3lhdyIsICJlbW9qaW0iLCAibXlhbm1hciIsICJsb3ZleW91IiBdCgkJCQkJCWNvZWcuc3VibWl0KG1iYXNpY2MsIHVpZCwgZmlpKQoJCQkJZXhpdCgpCgkJCQkKZGVmIGtvbmUoKToKICAgIHByaW50KGYie1B9WzFdICBCLUFQSSDigKMge0J9RmFzdCIpCiAgICBwcmludChmIntQfVsyXSBNQkFTSUMg4oCjIHtCfUxvdyIpCiAgICBwcmludChmIntQfVszXSBNT0JJTEUg4oCjIHtCfVZlcnkgbG93IikKCmRlZiBzdGFydGVkKCk6CiAgICBwcmludChmIntQfVvigKJde0p9IFJFU1VMVCB7SH1PSyB7Sn1TQVZFIOKAoyB7SH1PSy97dGFuZ2dhbH0iKQogICAgcHJpbnQoZiJ7UH1b4oCiXXtKfSBSRVNVTFQge0t9Q1Age0p9U0FWRSDigKMge0t9Q1Ave3RhbmdnYWx9IikKICAgIHByaW50KGYie1B9W+KAol17Sn0gSWYgWW91IE5vIFJlc3VsdCBBaXJwbGFuZSBNb2RlIDUgU2Vjb25kcyIpCiAgICBwcmludChmIntCfSB8IHtQfSIpCgpkZWYgYXBpKHVpZCwgZmlpKToKICAgIHRyeToKICAgICAgICB1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHVhID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCAyLjMuNDsgcHQtcHQ7IFNvbnlFcmljc3NvbkxUMThhIEJ1aWxkLzQuMC4xLkEuMC4yNjYpIEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzMuMScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjIuMTsgcnUtcnU7IDk5MzBpIEJ1aWxkL0pPUDQwRCkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMi4zLjQ7IHJ1LXJ1OyBNSUQgQnVpbGQvR1JKMjIpIEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzMuMScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjM7IGVuLXVzOyBBU1VTX1QwMEogQnVpbGQvSlNTMTVRKSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjIuMjsgcnUtcnU7IEZseSBJUTQ0MDQgQnVpbGQvSkRRMzkpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwIFlhbmRleFNlYXJjaC83LjE2IgogICAgZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQogICAgc3lzLnN0ZG91dC53cml0ZShmIlxye1B9W3tJfeKAo3tQfV0ge2xvb3B9L3tsZW4oaWQpfSB7UH1be0h9T0t7UH1dLVt7SH17bGVuKG9rKX17UH1dLVt7S31DUHtQfV0tW3tLfXtsZW4oY3ApfXtQfV0gIik7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICBmb3IgcHcgaW4gZmlpOgogICAgICAgIHB3ID0gcHcubG93ZXIoKQogICAgICAgIGhlYWRlcnNfID0geyJ4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwMDAwLjAsIDMwMDAwMDAwLjApKSwgIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwgIngtZmItbmV0LWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwgIngtZmItY29ubmVjdGlvbi1xdWFsaXR5IjogIkVYQ0VMTEVOVCIsICJ4LWZiLWNvbm5lY3Rpb24tdHlwZSI6ICJjZWxsLkNUUmFkaW9BY2Nlc3NUZWNobm9sb2d5SFNEUEEiLCAidXNlci1hZ2VudCI6IHVhLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsICJ4LWZiLWh0dHAtZW5naW5lIjogIkxpZ2VyIn0KICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICAgICBzZW5kID0gc2VzLmdldCgiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/Zm9ybWF0PWpzb24mZW1haWw9IitzdHIodWlkKSsiJnBhc3N3b3JkPSIrc3RyKHB3KSsiJmNyZWRlbnRpYWxzX3R5cGU9ZGV2aWNlX2Jhc2VkX2xvZ2luX3Bhc3N3b3JkJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJmVycm9yX2RldGFpbF90eXBlPWJ1dHRvbl93aXRoX2Rpc2FibGVkJnNvdXJjZT1kZXZpY2VfYmFzZWRfbG9naW4mbWV0YV9pbmZfZmJtZXRhPSUyMCZjdXJyZW50bHlfbG9nZ2VkX2lubG9sb2xpZD0wJm1ldGhvZD1HRVQmbG9jYWxlPWVuX1VTJmNsaWVudF9jb3VudHJ5X2NvZGU9VVMmZmJfYXBpX2NhbGxlcl9jbGFzcz1jb20uZmFjZWJvb2suZm9zLmhlYWRlcnN2Mi5mYjRhb3JjYS5IZWFkZXJzVjJDb25maWdGZXRjaFJlcXVlc3RIYW5kbGVyJmFjY2Vzc190b2tlbj0zNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzImZmJfYXBpX3JlcV9mcmllbmRseV9uYW1lPWF1dGhlbnRpY2F0ZSZjcGw9dHJ1ZSIsIGhlYWRlcnM9aGVhZGVyc18pCiAgICAgICAgaWYgInNlc3Npb25fa2V5IiBpbiBzZW5kLnRleHQgYW5kICJFQUFBIiBpbiBzZW5kLnRleHQ6CiAgICAgICAgICAgIHByaW50KGYiXHJ7SH3igKNPS+KAoyB7dWlkfSDinJTvuI4ge3B3fSIpCiAgICAgICAgICAgIG9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKICAgICAgICAgICAgb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbGlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBzZW5kLmpzb24oKVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpCiAgICAgICAgICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQogICAgICAgICAgICAgICAgdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQogICAgICAgICAgICAgICAgbW9udGgsIGRheSwgeWVhciA9IHR0bC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICBtb250aCA9IF9idWxhbl9bbW9udGhdCiAgICAgICAgICAgICAgICBwcmludChmIlxye0J9IOKAo+KAoyB7S317dWlkfSDigKMge3B3fSDigKMge2RheX0ge21vbnRofSB7eWVhcn0iKQogICAgICAgICAgICAgICAgY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQogICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICAgICAgZGF5ID0gKCIgIikKICAgICAgICAgICAgICAgIG1vbnRoID0gKCIgIikKICAgICAgICAgICAgICAgIHllYXIgPSAoIiAiKQogICAgICAgICAgICBleGNlcHQ6cGFzcwogICAgICAgICAgICBjZWtfbG9nKHVpZCxwdyx1YSkKICAgICAgICAgICAgcHJpbnQoZiJccntLfSDigKNDUOKAoyB7S317dWlkfSDigKMge3B3fSIpCiAgICAgICAgICAgIGNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKICAgICAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250aW51ZQoKICAgIGxvb3AgKz0gMQoKZGVmIGFwaWlpaSh1aWQsIGZpaSk6CiAgICB0cnk6CiAgICAgICAgdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICB1YSA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNltGQkFOL0VNQTtGQkxDL2l0X0lUO0ZCQVYvMjM5LjAuMC4xMC4xMDknLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMi4zLjQ7IHB0LXB0OyBTb255RXJpY3Nzb25MVDE4YSBCdWlsZC80LjAuMS5BLjAuMjY2KSBBcHBsZVdlYktpdC81MzMuMSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTMzLjEnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4yLjE7IHJ1LXJ1OyA5OTMwaSBCdWlsZC9KT1A0MEQpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDIuMy40OyBydS1ydTsgTUlEIEJ1aWxkL0dSSjIyKSBBcHBsZVdlYktpdC81MzMuMSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTMzLjEnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4zOyBlbi11czsgQVNVU19UMDBKIEJ1aWxkL0pTUzE1USkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4yLjI7IHJ1LXJ1OyBGbHkgSVE0NDA0IEJ1aWxkL0pEUTM5KSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCBZYW5kZXhTZWFyY2gvNy4xNiIKICAgIGdsb2JhbCBvaywgY3AsIGxvb3AsIHRva2VuLCBjb29raWUKCiAgICBzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7UH1be0l94oCje1B9XSB7bG9vcH0ve2xlbihpZCl9IHtQfVt7SH1PS3tQfV0tW3tIfXtsZW4ob2spfXtQfV0tW3tLfUNQe1B9XS1be0t9e2xlbihjcCl9e1B9XSAiKTtzeXMuc3Rkb3V0LmZsdXNoKCkKICAgIGZvciBwdyBpbiBmaWk6CiAgICAgICAgcHcgPSBwdy5sb3dlcigpCiAgICAgICAgaGVhZGVyc18gPSB7IngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLCAieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsICJ1c2VyLWFnZW50IjogdWEsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQogICAgICAgIHNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgICAgIHNlbmQgPSBzZXMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9mb3JtYXQ9anNvbiZlbWFpbD0iK3N0cih1aWQpKyImcGFzc3dvcmQ9IitzdHIocHcpKyImY3JlZGVudGlhbHNfdHlwZT1kZXZpY2VfYmFzZWRfbG9naW5fcGFzc3dvcmQmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmZXJyb3JfZGV0YWlsX3R5cGU9YnV0dG9uX3dpdGhfZGlzYWJsZWQmc291cmNlPWRldmljZV9iYXNlZF9sb2dpbiZtZXRhX2luZl9mYm1ldGE9JTIwJmN1cnJlbnRseV9sb2dnZWRfaW5sb2xvbGlkPTAmbWV0aG9kPUdFVCZsb2NhbGU9ZW5fVVMmY2xpZW50X2NvdW50cnlfY29kZT1VUyZmYl9hcGlfY2FsbGVyX2NsYXNzPWNvbS5mYWNlYm9vay5mb3MuaGVhZGVyc3YyLmZiNGFvcmNhLkhlYWRlcnNWMkNvbmZpZ0ZldGNoUmVxdWVzdEhhbmRsZXImYWNjZXNzX3Rva2VuPTM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiZmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWU9YXV0aGVudGljYXRlJmNwbD10cnVlIiwgaGVhZGVycz1oZWFkZXJzXykKICAgICAgICBpZiAic2Vzc2lvbl9rZXkiIGluIHNlbmQudGV4dCBhbmQgIkVBQUEiIGluIHNlbmQudGV4dDoKICAgICAgICAgICAgcHJpbnQoZiJccntIfSDigKNPS+KAoyB7dWlkfSDinJTvuI4ge3B3fSIpCiAgICAgICAgICAgIG9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKICAgICAgICAgICAgb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbGlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBzZW5kLmpzb24oKVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpCiAgICAgICAgICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQogICAgICAgICAgICAgICAgdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQogICAgICAgICAgICAgICAgbW9udGgsIGRheSwgeWVhciA9IHR0bC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICBtb250aCA9IF9idWxhbl9bbW9udGhdCiAgICAgICAgICAgICAgICBwcmludChmIlxye0t9IOKAo+KAoyB7dWlkfSDigKMge3B3fSDigKMge2RheX0ge21vbnR9IHt5ZWFyfSIpCiAgICAgICAgICAgICAgICBjcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCiAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy5qc29uJSIodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICBkYXkgPSAoIiAiKQogICAgICAgICAgICAgICAgbW9udGggPSAoIiAiKQogICAgICAgICAgICAgICAgeWVhciA9ICgiICIpCiAgICAgICAgICAgIGV4Y2VwdDpwYXNzCiAgICAgICAgICAgIHByaW50KGYiXHJ7S30g4oCjQ1DigKMge3VpZH0g4oCjIHtwd30iKQogICAgICAgICAgICBjcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCiAgICAgICAgICAgIG9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGludWUKCiAgICBsb29wICs9IDEKCmRlZiBtYmFzaWModWlkLCBmaWkpOgoJdHJ5OgoJCXVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzIzOS4wLjAuMTAuMTA5JywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDIuMy40OyBwdC1wdDsgU29ueUVyaWNzc29uTFQxOGEgQnVpbGQvNC4wLjEuQS4wLjI2NikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4xOyBydS1ydTsgOTkzMGkgQnVpbGQvSk9QNDBEKSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCAyLjMuNDsgcnUtcnU7IE1JRCBCdWlsZC9HUkoyMikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMzsgZW4tdXM7IEFTVVNfVDAwSiBCdWlsZC9KU1MxNVEpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4yOyBydS1ydTsgRmx5IElRNDQwNCBCdWlsZC9KRFEzOSkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAgWWFuZGV4U2VhcmNoLzcuMTYiCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7UH1be0p94oCje1B9XSB7bG9vcH0ve2xlbihpZCl9IHtQfVt7SH1PS3tQfV0tW3tIfXtsZW4ob2spfXtQfV0tW3tLfUNQe1B9XS1be0t9e2xlbihjcCl9e1B9XSAiKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCWZvciBwdyBpbiBmaWk6CgkJZmlpX2d0ZyA9IHt9CgkJcHcgPSBwdy5sb3dlcigpCgkJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIsICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCAiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCAidXNlci1hZ2VudCI6IHVhLCAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwgInJlZmVyZXIiOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9KQoJCXAgPSBzZXMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZyZWZpZD04IikudGV4dAoJCWIgPSBwYXJzZXIocCwiaHRtbC5wYXJzZXIiKQoJCWJsID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIl0KCQlmb3IgaSBpbiBiKCJpbnB1dCIpOgoJCQl0cnk6CgkJCQlpZiBpLmdldCgibmFtZSIpIGluIGJsOmZpaV9ndGcudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkKCQkJCWVsc2U6Y29udGludWUKCQkJZXhjZXB0OnBhc3MKCQlmaWlfZ3RnLnVwZGF0ZSh7ImVtYWlsIjogdWlkLCJwYXNzIjogcHcsInByZWZpbGxfY29udGFjdF9wb2ludCI6ICIiLCJwcmVmaWxsX3NvdXJjZSI6ICIiLCJwcmVmaWxsX3R5cGUiOiAiIiwiZmlyc3RfcHJlZmlsbF9zb3VyY2UiOiAiIiwiZmlyc3RfcHJlZmlsbF90eXBlIjogIiIsImhhZF9jcF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJoYWRfcGFzc3dvcmRfcHJlZmlsbGVkIjogImZhbHNlIiwiaXNfc21hcnRfbG9jayI6ICJmYWxzZSIsIl9mYl9ub3NjcmlwdCI6ICJ0cnVlIn0pCgkJZGVrdSA9IHNlcy5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpCgkJaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikKCQkJcHJpbnQoZiJccntIfSDigKNPS+KAoyB7SX17dWlkfSDinJTvuI4ge3B3fSIpCgkJCW9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKCQkJYnJlYWsKCQllbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToKCQkJdHJ5OgoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkKCQkJCWNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQoJCQkJCW1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQoJCQkJCXByaW50KGYiXHJ7S30g4oCjQ1DigKMge3VpZH0g4oCjIHtwd30g4oCjIHtkYXl9IHttb250aH0ge3llYXJ9IikKCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkKCQkJCQlicmVhawoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKCQkJCWRheSA9ICgiICIpCgkJCQltb250aCA9ICgiICIpCgkJCQl5ZWFyID0gKCIgIikKCQkJZXhjZXB0OnBhc3MKCQkJY2VrX2xvZyh1aWQscHcsdWEpCgkJCXByaW50KGYiXHJ7S30gPT4ge0t9e3VpZH0g4oCjIHtwd30iKQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCW9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpCgkJCWJyZWFrCgkJZWxzZToKCQkJY29udGludWUKCglsb29wICs9IDEKCmRlZiBtYmFzaWNjKHVpZCwgZmlpKToKCXRyeToKCQl1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCXVhID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCAyLjMuNDsgcHQtcHQ7IFNvbnlFcmljc3NvbkxUMThhIEJ1aWxkLzQuMC4xLkEuMC4yNjYpIEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzMuMScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjIuMTsgcnUtcnU7IDk5MzBpIEJ1aWxkL0pPUDQwRCkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMi4zLjQ7IHJ1LXJ1OyBNSUQgQnVpbGQvR1JKMjIpIEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzMuMScsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjM7IGVuLXVzOyBBU1VTX1QwMEogQnVpbGQvSlNTMTVRKSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjIuMjsgcnUtcnU7IEZseSBJUTQ0MDQgQnVpbGQvSkRRMzkpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwIFlhbmRleFNlYXJjaC83LjE2IgoJZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQoJc3lzLnN0ZG91dC53cml0ZShmIlxye1B9W3tKfeKAo3tQfV0ge2xvb3B9L3tsZW4oaWQpfSB7UH1be0h9T0t7UH1dLVt7SH17bGVuKG9rKX17UH1dLVt7S31DUHtQfV0tW3tLfXtsZW4oY3ApfXtQfV0gIik7c3lzLnN0ZG91dC5mbHVzaCgpCglmb3IgcHcgaW4gZmlpOgoJCWZpaV9ndGcgPSB7fQoJCXB3ID0gcHcubG93ZXIoKQoJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Im9yaWdpbiI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiB1YSwgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsICJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSkKCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmcmVmaWQ9OCIpLnRleHQKCQliID0gcGFyc2VyKHAsImh0bWwucGFyc2VyIikKCQlibCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiJdCgkJZm9yIGkgaW4gYigiaW5wdXQiKToKCQkJdHJ5OgoJCQkJaWYgaS5nZXQoIm5hbWUiKSBpbiBibDpmaWlfZ3RnLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pCgkJCQllbHNlOmNvbnRpbnVlCgkJCWV4Y2VwdDpwYXNzCgkJZmlpX2d0Zy51cGRhdGUoeyJlbWFpbCI6IHVpZCwicGFzcyI6IHB3LCJwcmVmaWxsX2NvbnRhY3RfcG9pbnQiOiAiIiwicHJlZmlsbF9zb3VyY2UiOiAiIiwicHJlZmlsbF90eXBlIjogIiIsImZpcnN0X3ByZWZpbGxfc291cmNlIjogIiIsImZpcnN0X3ByZWZpbGxfdHlwZSI6ICIiLCJoYWRfY3BfcHJlZmlsbGVkIjogImZhbHNlIiwiaGFkX3Bhc3N3b3JkX3ByZWZpbGxlZCI6ICJmYWxzZSIsImlzX3NtYXJ0X2xvY2siOiAiZmFsc2UiLCJfZmJfbm9zY3JpcHQiOiAidHJ1ZSJ9KQoJCWRla3UgPSBzZXMucG9zdCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtYmFzaWMuZmFjZWJvb2suY29tJTJGJmx3dj0xMDAmcmVmaWQ9OCIsZGF0YT1maWlfZ3RnKQoJCWlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQlrdWtpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pLnJlcGxhY2UoIm5vc2NyaXB0PTE7IiwgIiIpCgkJCXByaW50KGYiXHJ7SH0g4oCjT0vigKMge0l9e3VpZH0g4pyU77iOIHtwd30iKQoJCQlvay5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCW9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpCgkJCWJyZWFrCgkJZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCXRyeToKCQkJCXRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpCgkJCQljb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQoJCQkJd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgc2VzOgoJCQkJCXR0bCA9IHNlcy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyIlKHVpZCwgdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImJpcnRoZGF5Il0KCQkJCQltb250aCwgZGF5LCB5ZWFyID0gdHRsLnNwbGl0KCIvIikKCQkJCQltb250aCA9IGJ1bGFuX3R0bFttb250aF0KCQkJCQlwcmludChmIlxye0t9ID0+IHt1aWR9IOKAoyB7cHd9IOKAoyB7ZGF5fSB7bW9udGh9IHt5ZWFyfSIpCgkJCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQoJCQkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc3wlcyAlcyAlc1xuIiUodWlkLCBwdywgZGF5LCBtb250aCwgeWVhcikpCgkJCQkJYnJlYWsKCQkJZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CgkJCQlkYXkgPSAoIiAiKQoJCQkJbW9udGggPSAoIiAiKQoJCQkJeWVhciA9ICgiICIpCgkJCWV4Y2VwdDpwYXNzCgkJCXByaW50KGYiXHJ7S30g4oCjQ1DigKMge3VpZH0g4oCjIHtwd30iKQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpCgkJCWJyZWFrCgkJZWxzZToKCQkJY29udGludWUKCglsb29wICs9IDEKCQpkZWYgbW9iaWwodWlkLCBmaWkpOgoJdHJ5OgoJCXVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzIzOS4wLjAuMTAuMTA5JywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDIuMy40OyBwdC1wdDsgU29ueUVyaWNzc29uTFQxOGEgQnVpbGQvNC4wLjEuQS4wLjI2NikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4xOyBydS1ydTsgOTkzMGkgQnVpbGQvSk9QNDBEKSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCAyLjMuNDsgcnUtcnU7IE1JRCBCdWlsZC9HUkoyMikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMzsgZW4tdXM7IEFTVVNfVDAwSiBCdWlsZC9KU1MxNVEpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4yOyBydS1ydTsgRmx5IElRNDQwNCBCdWlsZC9KRFEzOSkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAgWWFuZGV4U2VhcmNoLzcuMTYiCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7UH1be0J94oCje1B9XSB7bG9vcH0ve2xlbihpZCl9IHtQfVt7SH1PS3tQfV0tW3tIfXtsZW4ob2spfXtQfV0tW3tLfUNQe1B9XS1be0t9e2xlbihjcCl9e1B9XSAiKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCWZvciBwdyBpbiBmaWk6CgkJZmlpX2d0ZyA9IHt9CgkJcHcgPSBwdy5sb3dlcigpCgkJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbS5mYWNlYm9vay5jb20iLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiB1YSwgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsICJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSkKCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJnJlZmlkPTgiKS50ZXh0CgkJYiA9IHBhcnNlcihwLCJodG1sLnBhcnNlciIpCgkJYmwgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iXQoJCWZvciBpIGluIGIoImlucHV0Iik6CgkJCXRyeToKCQkJCWlmIGkuZ2V0KCJuYW1lIikgaW4gYmw6ZmlpX2d0Zy51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQoJCQkJZWxzZTpjb250aW51ZQoJCQlleGNlcHQ6cGFzcwoJCWZpaV9ndGcudXBkYXRlKHsiZW1haWwiOiB1aWQsInBhc3MiOiBwdywicHJlZmlsbF9jb250YWN0X3BvaW50IjogIiIsInByZWZpbGxfc291cmNlIjogIiIsInByZWZpbGxfdHlwZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3NvdXJjZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3R5cGUiOiAiIiwiaGFkX2NwX3ByZWZpbGxlZCI6ICJmYWxzZSIsImhhZF9wYXNzd29yZF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJpc19zbWFydF9sb2NrIjogImZhbHNlIiwiX2ZiX25vc2NyaXB0IjogInRydWUifSkKCQlkZWt1ID0gc2VzLnBvc3QoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpCgkJaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikKCQkJcHJpbnQoZiJccntIfSDigKNPS+KAoyB7SX17dWlkfSDinJTvuI4ge3B3fSIpCgkJCW9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKCQkJYnJlYWsKCQllbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToKCQkJdHJ5OgoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkKCQkJCWNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQoJCQkJCW1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQoJCQkJCXByaW50KGYiXHJ7S30gPT4ge0t9e3VpZH0g4oCjIHtwd30g4oCjIHtkYXl9IHttb250aH0ge3llYXJ9IikKCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkKCQkJCQlicmVhawoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKCQkJCWRheSA9ICgiICIpCgkJCQltb250aCA9ICgiICIpCgkJCQl5ZWFyID0gKCIgIikKCQkJZXhjZXB0OnBhc3MKCQkJY2VrX2xvZyh1aWQscHcsdWEpCgkJCXByaW50KGYiXHJ7S30g4oCjQ1DigKMge0t9e3VpZH0g4oCjIHtwd30iKQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpCgkJCWJyZWFrCgkJZWxzZToKCQkJY29udGludWUKCglsb29wICs9IDEKCmRlZiBtb2JpbGwodWlkLCBmaWkpOgoJdHJ5OgoJCXVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzIzOS4wLjAuMTAuMTA5JywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDIuMy40OyBwdC1wdDsgU29ueUVyaWNzc29uTFQxOGEgQnVpbGQvNC4wLjEuQS4wLjI2NikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4xOyBydS1ydTsgOTkzMGkgQnVpbGQvSk9QNDBEKSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsJ01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCAyLjMuNDsgcnUtcnU7IE1JRCBCdWlsZC9HUkoyMikgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMzsgZW4tdXM7IEFTVVNfVDAwSiBCdWlsZC9KU1MxNVEpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMi4yOyBydS1ydTsgRmx5IElRNDQwNCBCdWlsZC9KRFEzOSkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAgWWFuZGV4U2VhcmNoLzcuMTYiCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7UH1be0J94oCje1B9XSB7bG9vcH0ve2xlbihpZCl9IHtQfVt7SH1PS3tQfV0tW3tIfXtsZW4ob2spfXtQfV0tW3tLfUNQe1B9XS1be0t9e2xlbihjcCl9e1B9XSAiKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCWZvciBwdyBpbiBmaWk6CgkJZmlpX2d0ZyA9IHt9CgkJcHcgPSBwdy5sb3dlcigpCgkJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbS5mYWNlYm9vay5jb20iLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiB1YSwgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsICJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSkKCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJnJlZmlkPTgiKS50ZXh0CgkJYiA9IHBhcnNlcihwLCJodG1sLnBhcnNlciIpCgkJYmwgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iXQoJCWZvciBpIGluIGIoImlucHV0Iik6CgkJCXRyeToKCQkJCWlmIGkuZ2V0KCJuYW1lIikgaW4gYmw6ZmlpX2d0Zy51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQoJCQkJZWxzZTpjb250aW51ZQoJCQlleGNlcHQ6cGFzcwoJCWZpaV9ndGcudXBkYXRlKHsiZW1haWwiOiB1aWQsInBhc3MiOiBwdywicHJlZmlsbF9jb250YWN0X3BvaW50IjogIiIsInByZWZpbGxfc291cmNlIjogIiIsInByZWZpbGxfdHlwZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3NvdXJjZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3R5cGUiOiAiIiwiaGFkX2NwX3ByZWZpbGxlZCI6ICJmYWxzZSIsImhhZF9wYXNzd29yZF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJpc19zbWFydF9sb2NrIjogImZhbHNlIiwiX2ZiX25vc2NyaXB0IjogInRydWUifSkKCQlkZWt1ID0gc2VzLnBvc3QoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpCgkJaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikKCQkJcHJpbnQoZiJccntIfSDigKNPS+KAoyB7SX17dWlkfSDinJTvuI4ge3B3fSIpCgkJCW9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkKCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkKCQkJYnJlYWsKCQllbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToKCQkJdHJ5OgoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkKCQkJCWNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9CgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQoJCQkJCW1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQoJCQkJCXByaW50KGYiXHJ7S30gPT4ge3VpZH0g4oCjIHtwd30g4oCjIHtkYXl9IHttb250aH0ge3llYXJ9IikKCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkKCQkJCQlicmVhawoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKCQkJCWRheSA9ICgiICIpCgkJCQltb250aCA9ICgiICIpCgkJCQl5ZWFyID0gKCIgIikKCQkJZXhjZXB0OnBhc3MKCQkJcHJpbnQoZiJccntLfSDigKNDUOKAo3t1aWR9IOKAoyB7cHd9IikKCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQoJCQlvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQoJCQlicmVhawoJCWVsc2U6CgkJCWNvbnRpbnVlCgoJbG9vcCArPSAxCgkKZGVmIGNla19sb2codWlkLHB3LHVhKToKCW1iID0gKCJodHRwczovL20uZmFjZWJvb2suY29tIikKCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJb3B0aW9uID0gW10KCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiAibS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsIm9yaWdpbiI6IG1iLCJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwidXNlci1hZ2VudCI6IHVhLCJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsIngtcmVxdWVzdGVkLXdpdGgiOiAibWFyay52aWEuZ3AiLCJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwic2VjLWZldGNoLXVzZXIiOiAiPzEiLCJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsInJlZmVyZXIiOiBtYisiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pCglkYXRhID0ge30KCWdlZCA9IHBhcnNlcihzZXMuZ2V0KG1iKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikKCWZtID0gZ2VkLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQoJbGlzdCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiIsImJpX3hyd2giXQoJZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6CgkJaWYgaS5nZXQoIm5hbWUiKSBpbiBsaXN0OgoJCQlkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pCgkJZWxzZToKCQkJY29udGludWUKCWRhdGEudXBkYXRlKHsiZW1haWwiOnVpZCwicGFzcyI6cHd9KQoJcnVuID0gcGFyc2VyKHNlcy5wb3N0KG1iK2ZtLmdldCgiYWN0aW9uIiksIGRhdGE9ZGF0YSwgYWxsb3dfcmVkaXJlY3RzPVRydWUpLnRleHQsICJodG1sLnBhcnNlciIpCglpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXM6CgkJZm9ybSA9IHJ1bi5maW5kKCJmb3JtIikKCQlkdHNnID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiZmJfZHRzZyJ9KVsidmFsdWUiXQoJCWp6c3QgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJqYXpvZXN0In0pWyJ2YWx1ZSJdCgkJbmggICA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Im5oIn0pWyJ2YWx1ZSJdCgkJZGF0YUQgPSB7ImZiX2R0c2ciOiBkdHNnLCJmYl9kdHNnIjogZHRzZywiamF6b2VzdCI6IGp6c3QsImphem9lc3QiOiBqenN0LCJjaGVja3BvaW50X2RhdGEiOiIiLCJzdWJtaXRbQ29udGludWVdIjoiTGFuanV0a2FuIiwibmgiOiBuaH0KCQl0ZW1wZWsgPSBwYXJzZXIoc2VzLnBvc3QobWIrZm9ybVsiYWN0aW9uIl0sIGRhdGE9ZGF0YUQpLnRleHQsICJodG1sLnBhcnNlciIpCgkJbmdldyA9IFt5eS50ZXh0IGZvciB5eSBpbiB0ZW1wZWsuZmluZF9hbGwoIm9wdGlvbiIpXQoJCXByaW50KGYiXHJ7UH1b4oCiXXtLfS0+IHtCfXt1aWR94oCie3B3fSIpCgkJZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOgoJCQlqYWxhbihmIntVfVt7Qn17c3RyKG9wdCsxKX17VX1de0J9LT4+e1V9W3tCfXtuZ2V3W29wdF19e1V9IikKCQlpZiAiMCIgaW4gc3RyKGxlbihuZ2V3KSk6CgkJCWphbGFuKGYie1B9W+KAol17SX0gSG9yZSBha3VueWEgdGFiIHllc3NzLCBzaWxhaGthbiBkaSBsb2dpbiAiKQoJZWxpZiAibG9naW5fZXJyb3IiIGluIHN0cihydW4pOgoJCWphbGFuKGYiXHJ7UH1b4oCiXXtLfS0+IHtCfXt1aWR94oCie3B3fSIpCgllbHNlOgoJCWphbGFuKGYiXHJ7UH1b4oCiXXtLfS0+IHtCfXt1aWR94oCie3B3fSIpCgoKaWYgX19uYW1lX189PSJfX21haW5fXyI6CiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIG1rZGlyX2RhdGFfbG9naW4oKQogICAgbWVudSgpCg=='))
